<!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * -->
<!-- * * * * * * * * * * * The content below * * * * * * * * * * * -->
<!-- * * * * * * * * * * is only a placeholder * * * * * * * * * * -->
<!-- * * * * * * * * * * and can be replaced.  * * * * * * * * * * -->
<!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * -->
<!-- * * * * * * * * * Delete the template below * * * * * * * * * -->
<!-- * * * * * * * to get started with your project! * * * * * * * -->
<!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * -->
<div class="container">
  
  <!-- MEN√ö -->
  <nav>
    <div style="cursor: pointer;" (click)="navigate('home')">
      <h1>üé¨ CineApp</h1>
    </div>
    <div>
      <button (click)="navigate('home')">Inicio</button>
      <button (click)="navigate('catalog')">Cat√°logo</button>
    </div>
  </nav>

  <!-- VISTA: HOME -->
  <div *ngIf="currentView() === 'home'" class="view home">
    <!-- Portada Visual (Banner) -->
    <div style="position: relative; margin-bottom: 40px; border-radius: 20px; overflow: hidden; box-shadow: 0 20px 50px rgba(0,0,0,0.5);">
      <img src="https://images.unsplash.com/photo-1536440136628-849c177e76a1?q=80&w=1625&auto=format&fit=crop" 
           style="width: 100%; height: 300px; object-fit: cover; opacity: 0.6; display: block;" alt="Banner Cine">
      <div style="position: absolute; inset: 0; display: flex; flex-direction: column; align-items: center; justify-content: center; background: rgba(0,0,0,0.4);">
        <h2>Bienvenido a tu Colecci√≥n</h2>
        <p>Organiza, descubre y revive tus pel√≠culas favoritas.</p>
        <button (click)="navigate('catalog')" style="margin-top: 20px;">Explorar Cat√°logo</button>
      </div>
    </div>

    <!-- Features -->
    <div class="features-grid">
      <div class="feature-card">
        <span class="feature-icon">üçø</span>
        <h3>Multimedia</h3>
        <p>Trailers de YouTube integrados para cada pel√≠cula.</p>
      </div>
      <div class="feature-card">
        <span class="feature-icon">‚ú®</span>
        <h3>Responsivo</h3>
        <p>Disfruta tu colecci√≥n en celular, tablet o PC.</p>
      </div>
      <div class="feature-card">
        <span class="feature-icon">üöÄ</span>
        <h3>Nube</h3>
        <p>Integraci√≥n con servicios de video externos.</p>
      </div>
    </div>
  </div>

  <!-- VISTA: CAT√ÅLOGO -->
  <div *ngIf="currentView() === 'catalog'" class="view catalog">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
      <h2 style="margin: 0;">Pel√≠culas</h2>
      <!-- CORRECCI√ìN: Eliminada la clase 'btn-add' para usar el estilo rojo por defecto -->
      <button (click)="goToAdd()">
        <span style="font-size: 1.2rem; vertical-align: middle; margin-right: 5px;">+</span> Agregar
      </button>
    </div>

    <div class="grid">
      <div *ngFor="let m of movies()" (click)="goToDetail(m)" class="card">
        <img [src]="m.image" onerror="this.src='https://via.placeholder.com/300x450/1f1f1f/666?text=Sin+Imagen'" alt="Poster">
        <h3>{{ m.name }}</h3>
      </div>
    </div>

    <!-- Mensaje vac√≠o -->
    <div *ngIf="movies().length === 0" style="text-align: center; color: #666; margin-top: 80px;">
      <span style="font-size: 3rem; display: block; margin-bottom: 10px;">üé¨</span>
      <p>No hay pel√≠culas a√∫n. ¬°Agrega la primera!</p>
    </div>
  </div>

  <!-- VISTA: DETALLE -->
  <div *ngIf="currentView() === 'detail' && selectedMovie()" class="view detail">
    <button (click)="navigate('catalog')" class="btn-secondary" style="margin-bottom: 20px;">‚Üê Regresar</button>
    
    <div class="detail-content">
      <!-- Columna Izquierda -->
      <div class="detail-image">
        <img [src]="selectedMovie()!.image" onerror="this.src='https://via.placeholder.com/300x450/333/fff?text=Sin+Imagen'">
        
        <div style="margin-top: 20px; display: grid; gap: 10px;">
          <button style="background: #E50914; width: 100%;">Ver en Netflix</button>
          <button style="background: #00A8E1; width: 100%;">Ver en Prime</button>
        </div>
      </div>

      <!-- Columna Derecha -->
      <div class="detail-info">
        <h2>{{ selectedMovie()!.name }}</h2>
        <div style="margin-bottom: 20px;">
          <span class="badge-year">{{ selectedMovie()!.year }}</span>
          <span style="margin-left: 10px; color: gold;">‚òÖ 8.5</span>
        </div>
        
        <!-- Video -->
        <div *ngIf="safeTrailerUrl()" style="margin-bottom: 30px; border-radius: 12px; overflow: hidden; box-shadow: 0 10px 30px rgba(0,0,0,0.5);">
          <iframe 
            [src]="safeTrailerUrl()" 
            style="width: 100%; aspect-ratio: 16/9;"
            title="YouTube video player" 
            frameborder="0" 
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
            allowfullscreen>
          </iframe>
        </div>

        <h4>SINOPSIS</h4>
        <p style="margin-bottom: 30px; line-height: 1.6;">{{ selectedMovie()!.synopsis }}</p>
        
        <div style="display: flex; gap: 15px;">
          <button (click)="goToEdit(selectedMovie()!)" class="btn-secondary">Editar Datos</button>
          <button (click)="deleteMovie(selectedMovie()!.id!)" style="background: transparent; border: 1px solid #ef4444; color: #ef4444 !important;">Eliminar</button>
        </div>
      </div>
    </div>
  </div>

  <!-- VISTA: FORMULARIO -->
  <div *ngIf="currentView() === 'form'" class="view" style="position: fixed; inset: 0; background: rgba(0,0,0,0.8); z-index: 200; display: flex; align-items: center; justify-content: center;">
    <div class="form-container" style="width: 100%; max-width: 500px;">
      <h2 style="margin-bottom: 20px;">{{ isEditing() ? 'Editar Pel√≠cula' : 'Nueva Pel√≠cula' }}</h2>
      
      <label>T√≠tulo</label>
      <input [(ngModel)]="formData.name" placeholder="Ej: Gladiador 2">
      
      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
        <div>
          <label>A√±o</label>
          <input [(ngModel)]="formData.year" type="number" placeholder="2024">
        </div>
        <div>
          <label>Rating (Opcional)</label>
          <input type="number" placeholder="Ej: 8.5">
        </div>
      </div>
      
      <label>URL Portada</label>
      <input [(ngModel)]="formData.image" placeholder="https://...">

      <label>URL Trailer (YouTube)</label>
      <input [(ngModel)]="formData.trailer_url" placeholder="https://youtube.com/...">
      
      <label>Sinopsis</label>
      <textarea [(ngModel)]="formData.synopsis" rows="4" placeholder="Resumen..."></textarea>
      
      <div style="display: flex; gap: 10px; margin-top: 20px;">
        <button (click)="saveMovie()" style="flex: 1;">Guardar</button>
        <button (click)="cancelForm()" class="btn-cancel" style="flex: 1;">Cancelar</button>
      </div>
    </div>
  </div>

  <!-- FOOTER -->
  <footer style="margin-top: 80px; padding-top: 20px; border-top: 1px solid rgba(255,255,255,0.1); text-align: center; color: #666; font-size: 0.9rem;">
    <p style="margin-bottom: 5px; color: #a1a1aa;">PI. Aplicaci√≥n web din√°mica en un servicio de la nube</p>
    <p>Desarrollado por: <strong>Alcantara Del Real Michelle</strong> | <br> LDSW - UDG </p>
    <p style="font-size: 0.8rem; margin-top: 10px;">&copy; 2025 CineApp. Todos los derechos reservados.</p>
  </footer>

</div>

<!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * -->
<!-- * * * * * * * * * * * The content above * * * * * * * * * * * * -->
<!-- * * * * * * * * * * is only a placeholder * * * * * * * * * * * -->
<!-- * * * * * * * * * * and can be replaced.  * * * * * * * * * * * -->
<!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * -->
<!-- * * * * * * * * * * End of Placeholder  * * * * * * * * * * * * -->
<!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * -->  
