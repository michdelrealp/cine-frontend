<!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * -->
<!-- * * * * * * * * * * * The content below * * * * * * * * * * * -->
<!-- * * * * * * * * * * is only a placeholder * * * * * * * * * * -->
<!-- * * * * * * * * * * and can be replaced.  * * * * * * * * * * -->
<!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * -->
<!-- * * * * * * * * * Delete the template below * * * * * * * * * -->
<!-- * * * * * * * to get started with your project! * * * * * * * -->
<!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * -->
<div class="container">
  <!-- MEN√ö -->
  <nav>
    <h1>üé¨ CineApp</h1>
    <div>
      <button (click)="navigate('home')">Inicio</button>
      <button (click)="navigate('catalog')">Cat√°logo</button>
    </div>
  </nav>


  <!-- HOME -->
  <div *ngIf="currentView() === 'home'" class="view home">
    <h2 style="color: #a12000; text-align: center;">Bienvenido al Cat√°logo de Pel√≠culas</h2>
    <p style="color:black; text-align: center;">Gestiona tu colecci√≥n f√°cilmente.</p>
    <p style="color:black; text-align: center;">Organiza, descubre y revive tus pel√≠culas favoritas en una experiencia inmersiva.</p>
    <button (click)="navigate('catalog')">Explorar Cat√°logo</button>
 
    <!-- Features (Tarjetas informativas debajo de la portada) -->
    <div class="container">
      <div class="features-grid">
        <div class="feature-card">
          <span class="feature-icon">üçø</span>
          <h3 style="color: black;">Multimedia</h3>
          <p style="color: black;">Trailers de YouTube integrados para cada pel√≠cula.</p>
        </div>
        <div class="feature-card">
          <span class="feature-icon">‚ú®</span>
          <h3 style="color: black;">Responsivo</h3>
          <p style="color: black;">Disfruta tu colecci√≥n en celular, tablet o PC.</p>
        </div>
        <div class="feature-card">
          <span class="feature-icon">üöÄ</span>
          <h3 style="color: black;">Nube</h3>
          <p style="color: black;">Integraci√≥n con servicios de video externos.</p>
        </div>
      </div>
    </div>
  </div>

  <!-- CAT√ÅLOGO -->
  <div *ngIf="currentView() === 'catalog'" class="view catalog">
    <button (click)="goToAdd()" class="btn-add">+ Agregar Pel√≠cula</button>
    <div class="grid">
      <div *ngFor="let m of movies()" (click)="goToDetail(m)" class="card">
        <img [src]="m.image" alt="Poster">
        <h3>{{ m.name }}</h3>
      </div>
    </div>

   <!-- Mensaje si no hay pel√≠culas -->
    <div *ngIf="movies().length === 0" style="text-align: center; color: #666; margin-top: 50px;">
      <p>No hay pel√≠culas a√∫n. ¬°Agrega la primera!</p>
    </div>
  </div>

  <!-- DETALLE -->
  <div *ngIf="currentView() === 'detail' && selectedMovie()" class="view detail">
    <button (click)="navigate('catalog')">‚Üê Regresar</button>
    
    <div class="detail-content">

      <!-- Columna Izquierda: Imagen y Streaming -->
      <div class="detail-image">
        <img [src]="selectedMovie()!.image" onerror="this.src='https://via.placeholder.com/300x450/333/fff?text=Sin+Imagen'">
        
        <!-- Botones simulados de plataformas externas -->
        <div class="streaming-links">
            <p>Disponible en:</p>
            <div class="platforms">
                <button class="btn-netflix">Netflix</button>
                <button class="btn-prime">Prime</button>
            </div>
        </div>
      </div>

      <!-- Columna Derecha: Info y Video -->
      <div class="detail-info">
        <h2>{{ selectedMovie()!.name }}</h2>
        <span class="badge-year">{{ selectedMovie()!.year }}</span>
        
        <!-- REPRODUCTOR DE VIDEO RESPONSIVO -->
        <!-- Solo se muestra si hay una URL segura procesada -->
        <div *ngIf="safeTrailerUrl()" class="video-container">
          <iframe 
            [src]="safeTrailerUrl()" 
            title="YouTube video player" 
            frameborder="0" 
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
            allowfullscreen>
          </iframe>
        </div>

        <h4>SINOPSIS</h4>
        <p>{{ selectedMovie()!.synopsis }}</p>
        
        <div class="actions">
          <button (click)="goToEdit(selectedMovie()!)" class="btn-edit">Editar</button>
          <button (click)="deleteMovie(selectedMovie()!.id!)" class="btn-danger">Eliminar</button>
        </div>
      </div>
    </div>
  </div>

  <!-- FORMULARIO -->
  <div *ngIf="currentView() === 'form'" class="container view">
    <div class="form-container">
      <h2 style="color: black;">{{ isEditing() ? 'Editar Pel√≠cula' : 'Agregar Nueva Pel√≠cula' }}</h2>
      
      <label>T√≠tulo</label>
      <input [(ngModel)]="formData.name" placeholder="Ej: Gladiador 2">
      
      <label>A√±o de estreno</label>
      <input [(ngModel)]="formData.year" type="number" placeholder="Ej: 2024">
      
      <label>URL de la Portada (Imagen)</label>
      <input [(ngModel)]="formData.image" placeholder="Pegar link de imagen aqu√≠...">

      <!-- CAMPO NUEVO PARA EL VIDEO -->
      <label>Link de YouTube (Trailer)</label>
      <input [(ngModel)]="formData.trailer_url" placeholder="Ej: https://www.youtube.com/watch?v=...">
      
      <label>Sinopsis</label>
      <textarea [(ngModel)]="formData.synopsis" rows="5" placeholder="Escribe de qu√© trata..."></textarea>
      
      <div class="form-actions">
        <button (click)="saveMovie()" class="btn-save">Guardar</button>
        <button (click)="cancelForm()" class="btn-cancel">Cancelar</button>
      </div>
    </div>
  </div>
</div>


<!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * -->
<!-- * * * * * * * * * * * The content above * * * * * * * * * * * * -->
<!-- * * * * * * * * * * is only a placeholder * * * * * * * * * * * -->
<!-- * * * * * * * * * * and can be replaced.  * * * * * * * * * * * -->
<!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * -->
<!-- * * * * * * * * * * End of Placeholder  * * * * * * * * * * * * -->
<!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * -->  
